"use strict";function _createForOfIteratorHelper(t,e){var l,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return o&&(t=o),l=0,{s:e=function(){},n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n=!0,i=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return n=t.done,t},e:function(t){i=!0,a=t},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var l=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(l="Object"===l&&t.constructor?t.constructor.name:l)||"Set"===l?Array.from(t):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var l=0,o=new Array(e);l<e;l++)o[l]=t[l];return o}var BLOCKLY_TOOLBOX_XML=BLOCKLY_TOOLBOX_XML||Object.create(null);BLOCKLY_TOOLBOX_XML.standard='\n<xml id="toolbox" style="display: none">\n    <category name="Browser" colour="#E82634">\n        <block type="go_to_website">\n            <value name="URL">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="download_from_url"></block>\n        <block type="set_user_agent"></block>\n        <block type="custom_user_agent">\n            <value name="AGENT">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="execute_javascript"></block>\n        <block type="new_tab"></block>\n        <block type="switch_tab">\n            <value name="INDEX">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="close_tab">\n            <value name="INDEX">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category name="HTML" colour="20">\n        <block type="html_elements"></block>\n        <block type="html_elements_by_selector"></block>\n        <block type="wait_for_elements"></block>\n        <block type="attribute_of"></block>\n        <block type="text_of"></block>\n        <block type="tag_name_of"></block>\n        <block type="is_html_element_exist"></block>\n        <block type="page_source"></block>\n    </category>\n    <category name="Events" colour="80">\n        <block type="click"></block>\n        <block type="type"></block>\n        <block type="press_key"></block>\n        <block type="wait_for"></block>\n        <block type="scroll"></block>\n    </category>\n\n    <sep></sep>\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n\n\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="convert_text_to_number">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n\n\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="convert_to_text"></block>\n        <block type="text_indexOf">\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n\n        </block>\n        <block type="text_getSubstring">\n\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="prompt">\n            <value name="MESSAGE">\n                <shadow type="text">\n                    <field name="TEXT">Enter a URL</field>\n                </shadow>\n            </value>\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n\n\n\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_chooser"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            \n        </block>\n        <block type="lists_getIndex">\n            \n        </block>\n        <block type="lists_setIndex">\n        </block>\n        <block type="lists_getSublist">\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_regex">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">hello, world</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n\n    <category id="catDict" colour="#2C5D6F" name="Dict">\n        <block type="dict_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="dict_create_with"></block>\n        <block type="dict_pair">\n            <value name="KEY">\n                <shadow type="text">\n                    <field name="TEXT">key</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="dict_get_value">\n            <value name="KEY">\n                <shadow type="text">\n                    <field name="TEXT">key</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="dict_set_value">\n            <value name="KEY">\n                <shadow type="text">\n                    <field name="TEXT">key</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="dict_get_all_keys"></block>\n        <block type="dict_key_exist">\n            <value name="KEY">\n                <shadow type="text">\n                    <field name="TEXT">key</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    \n    <sep></sep>\n    \n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n\n    <sep></sep>\n\n    <category id="catUtils" colour="#e67e22" name="Utils">\n        <block type="utils_tryCatch"></block>\n    </category>\n</xml>\n',Blockly.Blocks.go_to_website={init:function(){this.appendValueInput("URL").setCheck("String").appendField("go to website"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip("Navigate to a website"),this.setHelpUrl("")}},Blockly.JavaScript.go_to_website=function(t){t=Blockly.JavaScript.valueToCode(t,"URL",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"go_to_website",pointer:t})+","},Blockly.Blocks.download_from_url={init:function(){this.appendValueInput("URL").setCheck(null).appendField("download from").appendField(new Blockly.FieldDropdown([["url","URL"],["content","CONTENT"]]),"OP"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip("Trigger download of a file from a URL"),this.setHelpUrl("")}},Blockly.JavaScript.download_from_url=function(t){var e=t.getFieldValue("OP"),t=Blockly.JavaScript.valueToCode(t,"URL",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"download_from_url",pointer:{op:e,input:t}})+","},Blockly.Blocks.set_user_agent={init:function(){this.appendDummyInput().appendField("set user-agent to").appendField(new Blockly.FieldDropdown([["desktop","DESKTOP"],["mobile","MOBILE"]]),"OP"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.set_user_agent=function(t){t=t.getFieldValue("OP");return JSON.stringify({cmd:"set_user_agent",pointer:t})+","},Blockly.Blocks.custom_user_agent={init:function(){this.appendValueInput("AGENT").setCheck("String").appendField("set user-agent to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.custom_user_agent=function(t){t=Blockly.JavaScript.valueToCode(t,"AGENT",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"custom_user_agent",pointer:t})+","},Blockly.Blocks.execute_javascript={init:function(){this.appendValueInput("SCRIPT").setCheck("String").appendField("execute javascript"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.execute_javascript=function(t){t=Blockly.JavaScript.valueToCode(t,"SCRIPT",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"execute_javascript",pointer:t})+","},Blockly.Blocks.new_tab={init:function(){this.appendDummyInput().appendField("open a new tab"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip("Open a new tab in the browser"),this.setHelpUrl("")}},Blockly.JavaScript.new_tab=function(t){return JSON.stringify({cmd:"new_tab"})+","},Blockly.Blocks.switch_tab={init:function(){this.appendValueInput("INDEX").setCheck("Number").appendField("switch to tab"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip("Switch to a tab in the browser"),this.setHelpUrl("")}},Blockly.JavaScript.switch_tab=function(t){t=Blockly.JavaScript.valueToCode(t,"INDEX",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"switch_tab",pointer:t})+","},Blockly.Blocks.close_tab={init:function(){this.appendValueInput("INDEX").setCheck("Number").appendField("close tab"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#E82634"),this.setTooltip("Close a tab in the browser"),this.setHelpUrl("")}},Blockly.JavaScript.close_tab=function(t){t=Blockly.JavaScript.valueToCode(t,"INDEX",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"close_tab",pointer:t})+","},Blockly.Blocks.html_elements={init:function(){this.appendDummyInput().appendField("html elements"),this.setOutput(!0,"Array"),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.html_elements=function(t){t={cmd:"html_elements",pointer:JSON.parse(Gumify.stack[t.id])};return[JSON.stringify(t),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.html_elements_by_selector={init:function(){this.appendDummyInput().appendField("html elements by selector").appendField(new Blockly.FieldTextInput("a[href]"),"SELECTOR"),this.setOutput(!0,"Array"),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.html_elements_by_selector=function(t){t=t.getFieldValue("SELECTOR");return[JSON.stringify({cmd:"html_elements_by_selector",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.attribute_of={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField("attribute").appendField(new Blockly.FieldTextInput("href"),"ATTR_NAME").appendField("of").appendField(new Blockly.FieldDropdown([["all","ALL"],["first","FIRST"],["last","LAST"]]),"OP"),this.setOutput(!0,["String","Array"]),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.attribute_of=function(t){var e=t.getFieldValue("ATTR_NAME"),l=t.getFieldValue("OP"),t=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"attribute_of",pointer:{elements:t,attr:e,op:l}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.text_of={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField("text of").appendField(new Blockly.FieldDropdown([["all","ALL"],["first","FIRST"],["last","LAST"]]),"OP"),this.setOutput(!0,["String","Array"]),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.text_of=function(t){var e=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE),t=t.getFieldValue("OP");return[JSON.stringify({cmd:"text_of",pointer:{elements:e,op:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.tag_name_of={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField("tag name of").appendField(new Blockly.FieldDropdown([["all","ALL"],["first","FIRST"],["last","LAST"]]),"OP"),this.setOutput(!0,["String","Array"]),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.tag_name_of=function(t){var e=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE),t=t.getFieldValue("OP");return[JSON.stringify({cmd:"tag_name_of",pointer:{elements:e,op:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.wait_for_elements={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField("wait for"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.wait_for_elements=function(t){t=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"wait_for_elements",pointer:t})+","},Blockly.Blocks.is_html_element_exist={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField("is"),this.appendDummyInput().appendField("exist?"),this.setInputsInline(!0),this.setOutput(!0,"Boolean"),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.is_html_element_exist=function(t){t=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"is_html_element_exist",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.page_source={init:function(){this.appendDummyInput().appendField("page source as text"),this.setOutput(!0,"String"),this.setColour(20),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.page_source=function(t){return[JSON.stringify({cmd:"page_source"}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.click={init:function(){this.appendValueInput("ELEMENTS").setCheck("Array").appendField(new Blockly.FieldDropdown([["wait","WAIT"],["don't wait","DONT_WAIT"]]),"OP").appendField("and click on"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(80),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.click=function(t){var e=t.getFieldValue("OP"),t=Blockly.JavaScript.valueToCode(t,"ELEMENTS",Blockly.JavaScript.ORDER_NONE)||[];return JSON.stringify({cmd:"click",pointer:{elements:t,op:e}})+","},Blockly.Blocks.type={init:function(){this.appendValueInput("VALUE").setCheck(null).appendField("type"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(80),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.type=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"type",pointer:t})+","},Blockly.Blocks.press_key={init:function(){this.appendDummyInput().appendField("press key").appendField(new Blockly.FieldDropdown([["enter","ENTER"],["shift","SHIFT"],["ctrl","CTRL"],["caps lock","CAPS_LOCK"],["tab","TAB"],["esc","ESC"]]),"KEY"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(80),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.press_key=function(t){t=t.getFieldValue("KEY");return JSON.stringify({cmd:"press_key",pointer:t})+","},Blockly.Blocks.wait_for={init:function(){this.appendDummyInput().appendField("wait for").appendField(new Blockly.FieldTextInput("1"),"SECONDS").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(80),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.wait_for=function(t){t=t.getFieldValue("SECONDS");return JSON.stringify({cmd:"wait_for",pointer:t})+","},Blockly.Blocks.scroll={init:function(){this.appendDummyInput().appendField("scroll").appendField(new Blockly.FieldDropdown([["up","UP"],["down","DOWN"]]),"OP"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(80),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.scroll=function(t){t=t.getFieldValue("OP");return JSON.stringify({cmd:"scroll",pointer:t})+","},Blockly.JavaScript.controls_if=function(t){var e,l=[],o=_createForOfIteratorHelper(t.inputList);try{for(o.s();!(e=o.n()).done;){var a,n,i,c=e.value;c.name.startsWith("IF")?(a=Blockly.JavaScript.valueToCode(t,c.name,Blockly.JavaScript.ORDER_NONE)||"false",l.push({cond:a})):c.name.startsWith("DO")?((n=Blockly.JavaScript.statementToCode(t,c.name)).endsWith(",")&&(n=n.slice(0,-1)),l[l.length-1].do="["+n+"]"):"ELSE"===c.name&&((i=Blockly.JavaScript.statementToCode(t,c.name)).endsWith(",")&&(i=i.slice(0,-1)),l.push({else:"["+i+"]"}))}}catch(t){o.e(t)}finally{o.f()}return JSON.stringify({cmd:"controls_if",pointer:l})+","},Blockly.JavaScript.logic_compare=function(t){var e={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],l=Blockly.JavaScript.ORDER_NONE,o=Blockly.JavaScript.valueToCode(t,"A",l)||"0",t=Blockly.JavaScript.valueToCode(t,"B",l)||"0";return[JSON.stringify({cmd:"logic_compare",pointer:{op:e,value1:o,value2:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.logic_operation=function(t){var e={AND:"&&",OR:"||"}[t.getFieldValue("OP")],l=Blockly.JavaScript.ORDER_NONE,o=Blockly.JavaScript.valueToCode(t,"A",l)||{cmd:"logic_boolean",pointer:!1},t=Blockly.JavaScript.valueToCode(t,"B",l)||{cmd:"logic_boolean",pointer:!1};return[JSON.stringify({cmd:"logic_operation",pointer:{op:e,value1:o,value2:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.logic_negate=function(t){var e=Blockly.JavaScript.ORDER_NONE,t=Blockly.JavaScript.valueToCode(t,"BOOL",e)||{cmd:"logic_boolean",pointer:!1};return[JSON.stringify({cmd:"logic_negate",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.logic_boolean=function(t){t="TRUE"===(t=t.getFieldValue("BOOL"));return[JSON.stringify({cmd:"logic_boolean",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.logic_null=function(t){return[JSON.stringify({cmd:"logic_null",pointer:null}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.logic_ternary=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"IF",e)||{cmd:"logic_boolean",pointer:!1},o=Blockly.JavaScript.valueToCode(t,"THEN",e)||{cmd:"logic_null",pointer:null},t=Blockly.JavaScript.valueToCode(t,"ELSE",e)||{cmd:"logic_null",pointer:null};return[JSON.stringify({cmd:"logic_ternary",pointer:{op:"?",cond:l,value1:o,value2:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.controls_repeat_ext=function(t){var e=Blockly.JavaScript.valueToCode(t,"TIMES",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:0},t=Blockly.JavaScript.statementToCode(t,"DO"),e={times:e,loopBlock:"["+(t=t.endsWith(",")?t.slice(0,-1):t)+"]"};return JSON.stringify({cmd:"controls_repeat_ext",pointer:e})+","},Blockly.JavaScript.controls_whileUntil=function(t){var e=t.getFieldValue("MODE"),l=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"BOOL",l)||{cmd:"logic_boolean",pointer:!1},t=Blockly.JavaScript.statementToCode(t,"DO"),l={cond:l,value:l,mode:e,loopBlock:"["+(t=t.endsWith(",")?t.slice(0,-1):t)+"]"};return JSON.stringify({cmd:"controls_whileUntil",pointer:l})+","},Blockly.JavaScript.controls_for=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),l=Blockly.JavaScript.ORDER_NONE,o=Blockly.JavaScript.valueToCode(t,"FROM",l)||{cmd:"math_number",pointer:0},a=Blockly.JavaScript.valueToCode(t,"TO",l)||{cmd:"math_number",pointer:0},l=Blockly.JavaScript.valueToCode(t,"BY",l)||{cmd:"math_number",pointer:1},t=Blockly.JavaScript.statementToCode(t,"DO"),e={variable:e,from:o,to:a,step:l,loopBlock:"["+(t=t.endsWith(",")?t.slice(0,-1):t)+"]"};return JSON.stringify({cmd:"controls_for",pointer:e})+","},Blockly.JavaScript.controls_forEach=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),l=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"LIST",l)||{cmd:"list_create_with",pointer:[]},t=Blockly.JavaScript.statementToCode(t,"DO"),e={variable:e,list:l,loopBlock:"["+(t=t.endsWith(",")?t.slice(0,-1):t)+"]"};return JSON.stringify({cmd:"controls_forEach",pointer:e})+","},Blockly.JavaScript.controls_flow_statements=function(t){t=t.getFieldValue("FLOW");return JSON.stringify({cmd:"controls_flow_statements",pointer:{flow:t}})+","},Blockly.JavaScript.math_number=function(t){return[JSON.stringify({cmd:"math_number",pointer:t.getFieldValue("NUM")}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_arithmetic=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"A",e)||{cmd:"math_number",pointer:0},e=Blockly.JavaScript.valueToCode(t,"B",e)||{cmd:"math_number",pointer:0},t=t.getFieldValue("OP");return[JSON.stringify({cmd:"math_arithmetic",pointer:{op:t,value1:l,value2:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_single=function(t){var e=Blockly.JavaScript.ORDER_NONE,e=Blockly.JavaScript.valueToCode(t,"NUM",e)||{cmd:"math_number",pointer:0},t=t.getFieldValue("OP");return[JSON.stringify({cmd:"math_single",pointer:{op:t,value:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_trig=function(t){var e=Blockly.JavaScript.ORDER_NONE,e=Blockly.JavaScript.valueToCode(t,"NUM",e)||{cmd:"math_number",pointer:0},t=t.getFieldValue("OP");return[JSON.stringify({cmd:"math_trig",pointer:{op:t,value:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_constant=function(t){t={const:t.getFieldValue("CONSTANT")};return[JSON.stringify({cmd:"math_constant",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_number_property=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"NUMBER_TO_CHECK",e)||{cmd:"math_number",pointer:0},e=Blockly.JavaScript.valueToCode(t,"DIVISOR",e)||{cmd:"math_number",pointer:0},t=t.getFieldValue("PROPERTY");return[JSON.stringify({cmd:"math_number_property",pointer:{property:t,value1:l,value2:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.convert_text_to_number={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("convert"),this.appendDummyInput().appendField("to number"),this.setOutput(!0,"Number"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.convert_text_to_number=function(t){t=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"convert_text_to_number",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_round=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=t.getFieldValue("OP"),t=Blockly.JavaScript.valueToCode(t,"NUM",e)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"math_round",pointer:{value:t,op:l}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_on_list=function(t){var e=Blockly.JavaScript.ORDER_NONE,e=Blockly.JavaScript.valueToCode(t,"LIST",e)||{cmd:"list_create_with",pointer:[]},t=t.getFieldValue("OP");return[JSON.stringify({cmd:"math_on_list",pointer:{op:t,list:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_modulo=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"DIVIDEND",e)||{cmd:"math_number",pointer:0},t=Blockly.JavaScript.valueToCode(t,"DIVISOR",e)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"math_modulo",pointer:{value1:l,value2:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_constrain=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"VALUE",e)||{cmd:"math_number",pointer:0},o=Blockly.JavaScript.valueToCode(t,"LOW",e)||{cmd:"math_number",pointer:0},t=Blockly.JavaScript.valueToCode(t,"HIGH",e)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"math_constrain",pointer:{value:l,min:o,max:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_random_int=function(t){var e=Blockly.JavaScript.ORDER_NONE,l=Blockly.JavaScript.valueToCode(t,"FROM",e)||{cmd:"math_number",pointer:0},t=Blockly.JavaScript.valueToCode(t,"TO",e)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"math_random_int",pointer:{min:l,max:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.math_random_float=function(t){return[JSON.stringify({cmd:"math_random_float"}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text=function(t){return[JSON.stringify({cmd:"text",pointer:t.getFieldValue("TEXT")}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_join=function(t){for(var e=[],l=0;l<t.inputList.length;l++){var o=Blockly.JavaScript.valueToCode(t,"ADD"+l,Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};e.push(o)}return[JSON.stringify({cmd:"text_join",pointer:e}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_append=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),t=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return JSON.stringify({cmd:"text_append",pointer:{variable:e,text:t}})+","},Blockly.JavaScript.text_length=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return[JSON.stringify({cmd:"text_length",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_isEmpty=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return[JSON.stringify({cmd:"text_isEmpty",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.convert_to_text={init:function(){this.appendValueInput("VALUE").setCheck(null).appendField("convert"),this.appendDummyInput().appendField("to text"),this.setOutput(!0,"String"),this.setColour(160),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.convert_to_text=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"convert_to_text",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_indexOf=function(t){var e=t.getFieldValue("END"),l=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""},t=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return[JSON.stringify({cmd:"text_indexOf",pointer:{value:l,substring:t,indexOf:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_charAt=function(t){var e=t.getFieldValue("WHERE")||"FROM_START",l=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""},t=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"text_charAt",pointer:{value:l,at:t,action:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_getSubstring=function(t){var e=t.getFieldValue("WHERE1")||{cmd:"math_number",pointer:0},l=t.getFieldValue("WHERE2")||{cmd:"math_number",pointer:0},o=Blockly.JavaScript.valueToCode(t,"STRING",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""},a=Blockly.JavaScript.valueToCode(t,"AT1",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:0},t=Blockly.JavaScript.valueToCode(t,"AT2",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"text_getSubstring",pointer:{value:o,at1:a,at2:t,action1:e,action2:l}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_changeCase=function(t){var e=t.getFieldValue("CASE"),t=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return[JSON.stringify({cmd:"text_changeCase",pointer:{value:t,action:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_trim=function(t){var e=t.getFieldValue("MODE"),t=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return[JSON.stringify({cmd:"text_trim",pointer:{value:t,action:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.text_print=function(t){t=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:""};return JSON.stringify({cmd:"text_print",pointer:t})+","},Blockly.Blocks.prompt={init:function(){this.appendDummyInput().appendField("prompt"),this.appendValueInput("VALUE").setCheck(null).appendField("with value"),this.appendValueInput("MESSAGE").setCheck(null).appendField("with message"),this.setInputsInline(!1),this.setOutput(!0,"String"),this.setColour(160),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.prompt=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(t,"MESSAGE",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"prompt",pointer:{value:e,message:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_create_with=function(t){for(var e=[],l=0;l<t.itemCount_;l++){var o=Blockly.JavaScript.valueToCode(t,"ADD"+l,Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null};e.push(o)}return[JSON.stringify({cmd:"lists_create_with",pointer:e}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.lists_chooser={init:function(){this.appendValueInput("LIST").setCheck("Array").appendField("prompt options"),this.setOutput(!0,"Number"),this.setColour(260),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.lists_chooser=function(t){t=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]};return[JSON.stringify({cmd:"lists_chooser",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_repeat=function(t){var e=Blockly.JavaScript.valueToCode(t,"ITEM",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null},t=Blockly.JavaScript.valueToCode(t,"NUM",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:0};return[JSON.stringify({cmd:"lists_repeat",pointer:{value:e,times:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_length=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]};return[JSON.stringify({cmd:"lists_length",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_isEmpty=function(t){t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]};return[JSON.stringify({cmd:"lists_isEmpty",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_indexOf=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]},l=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null},t=t.getFieldValue("END");return[JSON.stringify({cmd:"lists_indexOf",pointer:{list:e,item:l,indexOf:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_getIndex=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]},l=t.getFieldValue("MODE"),o=t.getFieldValue("WHERE"),t=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:1};return"REMOVE"===l?JSON.stringify({cmd:"lists_getIndex",pointer:{list:e,index:t,mode:l,where:o}})+",":[JSON.stringify({cmd:"lists_getIndex",pointer:{list:e,index:t,mode:l,where:o}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_setIndex=function(t){var e=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]},l=Blockly.JavaScript.valueToCode(t,"TO",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null},o=t.getFieldValue("MODE"),a=t.getFieldValue("WHERE"),t=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:1};return JSON.stringify({cmd:"lists_setIndex",pointer:{list:e,value:l,index:t,mode:o,where:a}})+","},Blockly.JavaScript.lists_getSublist=function(t){var e=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]},l=t.getFieldValue("WHERE1"),o=t.getFieldValue("WHERE2"),a=Blockly.JavaScript.valueToCode(t,"AT1",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:1},t=Blockly.JavaScript.valueToCode(t,"AT2",Blockly.JavaScript.ORDER_NONE)||{cmd:"math_number",pointer:1};return[JSON.stringify({cmd:"lists_getSublist",pointer:{list:e,where1:l,where2:o,at1:a,at2:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_split=function(t){var e=Blockly.JavaScript.valueToCode(t,"DELIM",Blockly.JavaScript.ORDER_NONE)||{cmd:"text",pointer:","},l=t.getFieldValue("MODE"),t=Blockly.JavaScript.valueToCode(t,"INPUT",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]};return[JSON.stringify({cmd:"lists_split",pointer:{value:t,mode:l,delim:e}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.lists_regex={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("in"),this.appendDummyInput().appendField("find all").appendField(new Blockly.FieldTextInput("[a-z]"),"REGEX"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(260),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.lists_regex=function(t){var e=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE),t=t.getFieldValue("REGEX");return[JSON.stringify({cmd:"lists_regex",pointer:{text:e,regex:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.lists_sort=function(t){var e=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||{cmd:"lists_create_with",pointer:[]},l=t.getFieldValue("DIRECTION"),t=t.getFieldValue("TYPE");return[JSON.stringify({cmd:"lists_sort",pointer:{list:e,direction:l,type:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.dict_create_with=Object.assign({},Blockly.Blocks.lists_create_with),Blockly.Blocks.dict_create_with.init=function(){this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Dict"),this.setMutator(new Blockly.Mutator(["lists_create_with_item"])),this.setColour("#2C5D6F")},Blockly.Blocks.dict_create_with.updateShape_=function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField("create empty dictionary");for(var t,e=0;e<this.itemCount_;e++)this.getInput("ADD"+e)||(t=this.appendValueInput("ADD"+e).setAlign(Blockly.ALIGN_RIGHT).setCheck("Pair"),0==e&&t.appendField("create dictionary with"));for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++},Blockly.JavaScript.dict_create_with=function(t){for(var e=[],l=0;l<t.itemCount_;l++){var o=Blockly.JavaScript.valueToCode(t,"ADD"+l,Blockly.JavaScript.ORDER_NONE)||{cmd:"dict_pair",pointer:{key:{cmd:"logic_null",pointer:null},value:{cmd:"logic_null",pointer:null}}};e.push(o)}return[JSON.stringify({cmd:"dict_create_with",pointer:e}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.dict_pair={init:function(){this.appendValueInput("KEY").setCheck("String").appendField("key"),this.appendValueInput("VALUE").setCheck(null).appendField("value"),this.setInputsInline(!0),this.setOutput(!0,"Pair"),this.setColour("#2C5D6F"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.dict_pair=function(t){var e=Blockly.JavaScript.valueToCode(t,"KEY",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"dict_pair",pointer:{key:e,value:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.dict_get_value={init:function(){this.appendValueInput("KEY").setCheck("String").appendField("get"),this.appendValueInput("DICT").setCheck("Dict").appendField("from dict"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour("#2C5D6F"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.dict_get_value=function(t){var e=Blockly.JavaScript.valueToCode(t,"KEY",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(t,"DICT",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"dict_get_value",pointer:{key:e,dict:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.dict_set_value={init:function(){this.appendValueInput("DICT").setCheck("Dict").appendField("in dict"),this.appendValueInput("KEY").setCheck("String").appendField("set key"),this.appendValueInput("VALUE").setCheck(null).appendField("value"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#2C5D6F"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.dict_set_value=function(t){var e=Blockly.JavaScript.valueToCode(t,"DICT",Blockly.JavaScript.ORDER_NONE),l=Blockly.JavaScript.valueToCode(t,"KEY",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE);return JSON.stringify({cmd:"dict_set_value",pointer:{dict:e,key:l,value:t}})+","},Blockly.Blocks.dict_get_all_keys={init:function(){this.appendValueInput("DICT").setCheck("Dict").appendField("in dict"),this.appendDummyInput().appendField("get all keys"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour("#2C5D6F"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.dict_get_all_keys=function(t){t=Blockly.JavaScript.valueToCode(t,"DICT",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"dict_get_all_keys",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.dict_key_exist={init:function(){this.appendValueInput("DICT").setCheck("Dict").appendField("in dict"),this.appendValueInput("KEY").setCheck("String").appendField("key"),this.appendDummyInput().appendField("exist?"),this.setInputsInline(!0),this.setOutput(!0,"Boolean"),this.setColour("#2C5D6F"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.dict_key_exist=function(t){var e=Blockly.JavaScript.valueToCode(t,"DICT",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(t,"KEY",Blockly.JavaScript.ORDER_NONE);return[JSON.stringify({cmd:"dict_key_exist",pointer:{dict:e,key:t}}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.variables_set=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),l=Blockly.JavaScript.ORDER_NONE,t=Blockly.JavaScript.valueToCode(t,"VALUE",l)||{cmd:"logic_null",pointer:null};return JSON.stringify({cmd:"variables_set",pointer:{variable:e,value:t}})+","},Blockly.JavaScript.math_change=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME),l=Blockly.JavaScript.ORDER_NONE,t=Blockly.JavaScript.valueToCode(t,"DELTA",l)||{cmd:"math_number",pointer:0};return JSON.stringify({cmd:"math_change",pointer:{variable:e,value:t}})+","},Blockly.JavaScript.variables_get=function(t){t=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.VARIABLE_CATEGORY_NAME);return[JSON.stringify({cmd:"variables_get",pointer:t}),Blockly.JavaScript.ORDER_NONE]},Blockly.JavaScript.procedures_defnoreturn=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),l=Blockly.JavaScript.statementToCode(t,"STACK"),o=(l.endsWith(",")&&(l=l.slice(0,-1)),[]),a=0;a<t.arguments_.length;a++)o[a]=Blockly.JavaScript.variableDB_.getName(t.arguments_[a],Blockly.VARIABLE_CATEGORY_NAME);return JSON.stringify({cmd:"procedures_defnoreturn",pointer:{name:e,args:o,functionBlock:"["+l+"]"}})+","},Blockly.JavaScript.procedures_callnoreturn=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),l={},o=0;o<t.argumentVarModels_.length;o++)l[Blockly.JavaScript.variableDB_.getName(t.argumentVarModels_[o].id_,Blockly.VARIABLE_CATEGORY_NAME)]=Blockly.JavaScript.valueToCode(t,"ARG"+o,Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null};return JSON.stringify({cmd:"procedures_callnoreturn",pointer:{name:e,args:l}})+","},Blockly.JavaScript.procedures_ifreturn=function(t){var e=Blockly.JavaScript.valueToCode(t,"CONDITION",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_boolean",pointer:!1},t=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null};return JSON.stringify({cmd:"procedures_ifreturn",pointer:{condition:e,value:t}})+","},Blockly.JavaScript.procedures_defreturn=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),l=Blockly.JavaScript.valueToCode(t,"RETURN",Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null},o=Blockly.JavaScript.statementToCode(t,"STACK"),a=(o.endsWith(",")&&(o=o.slice(0,-1)),[]),n=0;n<t.arguments_.length;n++)a[n]=Blockly.JavaScript.variableDB_.getName(t.arguments_[n],Blockly.VARIABLE_CATEGORY_NAME);return JSON.stringify({cmd:"procedures_defreturn",pointer:{name:e,args:a,functionBlock:"["+o+"]",ret:l}})+","},Blockly.JavaScript.procedures_callreturn=function(t){for(var e=t.arguments_,l=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),o={},a=0;a<e.length;a++)o[e[a]]=Blockly.JavaScript.valueToCode(t,"ARG"+a,Blockly.JavaScript.ORDER_NONE)||{cmd:"logic_null",pointer:null};return[JSON.stringify({cmd:"procedures_callreturn",pointer:{name:l,args:o}}),Blockly.JavaScript.ORDER_NONE]},Blockly.Blocks.utils_tryCatch={init:function(){this.appendStatementInput("TRY").setCheck(null).appendField("try"),this.appendStatementInput("CATCH").setCheck(null).appendField("catch"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#e67e22"),this.setTooltip(""),this.setHelpUrl("")}},Blockly.JavaScript.utils_tryCatch=function(t){var e=Blockly.JavaScript.statementToCode(t,"TRY"),t=Blockly.JavaScript.statementToCode(t,"CATCH"),e={cmd:"utils_tryCatch",pointer:{try:"["+(e=e.endsWith(",")?e.slice(0,-1):e)+"]",catch:"["+(t=t.endsWith(",")?t.slice(0,-1):t)+"]"}};return JSON.stringify(e)+","},window.Gumify={},Blockly.HSV_SATURATION=1,Blockly.Scrollbar.scrollbarThickness=10;try{window.Gumify.stack=JSON.parse(localStorage.getItem("variableStack"))}catch(t){window.Gumify.stack={}}window.Gumify.lastBlockId=null,window.getTextColor=function(){return"true"===localStorage.getItem("isDark")?"#fff":"#31302e"};var darkTheme=Blockly.Theme.defineTheme("PiperDarkTheme",{base:Blockly.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#31302e",toolboxBackgroundColour:"#3c3a38",toolboxForegroundColour:"#eee",flyoutBackgroundColour:"rgba(60, 58, 56, 0.8)"},fontStyle:{size:12}}),lightTheme=Blockly.Theme.defineTheme("PiperLightTheme",{base:Blockly.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#fff",toolboxBackgroundColour:"#eee",toolboxForegroundColour:"#333",flyoutBackgroundColour:"rgba(238, 238, 238, 0.8)"},fontStyle:{size:12}});function getTheme(){return"true"===localStorage.getItem("isDark")?darkTheme:lightTheme}var mediaPath="/static/piper/media/",isToolbarToggleVisible=(window.isExtension&&(mediaPath="/static/piper/media/"),window.workspace=Blockly.inject("blockly-div",{media:mediaPath,toolbox:BLOCKLY_TOOLBOX_XML.standard,zoom:{controls:!0},move:{drag:!0,wheel:!1},comments:!1,theme:getTheme()}),window.switchTheme=function(t){localStorage.setItem("xml",Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(workspace))),localStorage.setItem("isDark",t),location.reload()},Blockly.JavaScript.init(workspace),Blockly.JavaScript.workspaceToCode=function(t){for(var e,l="[",o=t.getTopBlocks(!0),a=0;e=o[a];a++)e.disabled||(l+=(e=(e=(e=Blockly.JavaScript.blockToCode(e))instanceof Array?e[0]:e).endsWith(",")?e.slice(0,-1):e)+",");return l.endsWith(",")&&(l=l.slice(0,-1)),l+="]"},window.isExtension||setTimeout(function(){try{window.Gumify.stack=JSON.parse(localStorage.getItem("variableStack"))}catch(t){window.Gumify.stack={}}try{Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(localStorage.getItem("xml")),workspace),localStorage.setItem("xml",null)}catch(t){}},500),"true"===localStorage.getItem("isToolbarToggleVisible")),genBtn=(workspace.addChangeListener(function(t){if(null===window.Gumify.stack&&(window.Gumify.stack={}),"dragStop"!==t.element&&"dragStart"!==t.element||updateToolbarIconsColor(),"selected"===t.element&&""===t.group&&null!==t.oldValue&&null!==t.newValue)try{"html_elements"===workspace.getBlockById(t.oldValue).type&&void 0===Gumify.stack[t.newValue]&&(Gumify.stack[t.newValue]=Gumify.stack[t.oldValue])}catch(t){}if("dragStop"===t.element&&void 0===Gumify.stack[t.blockId])try{var e=workspace.getBlockById(t.blockId);Gumify.lastBlockId=e.id,"html_elements"===e.type&&(Gumify.stack[t.blockId]="",window.Native?window.Native.openBrowser():window.onHtmlElementSelector&&window.onHtmlElementSelector())}catch(t){}"dragStart"===t.element&&isToolbarToggleVisible&&(workspace.getToolbox().width=0,workspace.deleteAreaToolbox_.right=0,document.querySelector(".blocklyToolboxDiv").style.display="none",$(".blocklyTreeHandle").css("left","0px"))}),document.querySelector("#gen"));function updateToolbarIconsColor(){var e=!1;$(".blocklyFlyout").each(function(t){e||"block"!==window.getComputedStyle(t).display||(e=!0)}),e||$(".blocklyTreeRow .material-icons").css("color",getTextColor())}function handleColor(){return"true"===localStorage.getItem("isDark")?"#3c3a38":"#eee"}null!==genBtn&&genBtn.addEventListener("click",function(){var t=Blockly.JavaScript.workspaceToCode(workspace);console.log(t),document.querySelector("#code").textContent=t,localStorage.setItem("xml",Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(workspace)))}),Gumify.generate=function(){var t,e=JSON.parse(Blockly.JavaScript.workspaceToCode(workspace)),l=Blockly.Xml.workspaceToDom(workspace),o=Gumify.stack;for(t in o)null===workspace.getBlockById(t)&&delete o[t];return{code:e,xml:Blockly.Xml.domToText(l),stack:o}},Gumify.compile=function(){var t=Blockly.JavaScript.workspaceToCode(workspace);return JSON.parse(t)},Gumify.updateLastBlock=function(t){if(null===t||"null"===t||""===t)return workspace.getBlockById(Gumify.lastBlockId).dispose(),null;t=atob(t);return Gumify.stack[Gumify.lastBlockId]=t},Gumify.updateWorkspace=function(t,e){t=decodeURIComponent(escape(window.atob(t))),e=decodeURIComponent(escape(window.atob(e)));Gumify.stack=JSON.parse(e),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(t),workspace)},$(".blocklyTreeSeparator").css({borderBottom:"1px solid rgba(255, 255, 255, 0.1)",borderLeft:"none"}),document.addEventListener("click",function(t){updateToolbarIconsColor()},!1),$(".blocklyTreeRow .blocklyTreeIcon").each(function(t){var t=$(t).parent(),e=(t.css("border-left").split("rgb"),t.find(".blocklyTreeLabel").css("font-size","0.8rem").text().trim()),l=(t.css({display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",height:"auto",padding:"10px 0px",borderLeft:"none",transition:"all 0.2s ease-in-out"}).find(".blocklyTreeIcon").css({height:"auto",width:"auto"}),document.createElement("i"));$(l).addClass("material-icons"),t.on("click",function(){setTimeout(function(){$(".blocklyTreeRow .material-icons").css("color",getTextColor());var t=$(".blocklyToolboxDiv").innerWidth();l.style.color="white",$(".blocklyFlyout").css("transform","translate("+t+"px, 0px)"),updateToolbarIconsColor()},1)}),"Browser"===e?l.textContent="public":"HTML"===e?l.textContent="code":"Events"===e?l.textContent="event":"File I/O"===e?l.textContent="folder":"Logic"===e?l.textContent="account_tree":"Loops"===e?l.textContent="repeat":"Math"===e?l.textContent="calculate":"Text"===e?l.textContent="text_fields":"Lists"===e?l.textContent="data_array":"Dict"===e?l.textContent="data_object":"Variables"===e?l.textContent="inventory":"Functions"===e?l.textContent="functions":"Utils"===e&&(l.textContent="settings"),t.prepend(l),t.find(".blocklyTreeIcon").remove()}),"true"===localStorage.getItem("isToolbarToggleVisible")&&setTimeout(function(){var e=$(document.createElement("div")),t=(e.addClass("blocklyTreeHandle"),$(document.createElement("span"))),l=(t.addClass("blocklyTreeBar1").css("background-color",getTextColor()),$(document.createElement("span"))),o=(l.addClass("blocklyTreeBar2").css("background-color",getTextColor()),$(document.createElement("span")));o.addClass("blocklyTreeBar3").css("background-color",getTextColor()),e.append(t),e.append(l),e.append(o),$("#blockly-div").append(e),workspace.getToolbox().width;workspace.getToolbox().width=0,workspace.deleteAreaToolbox_.right=0,document.querySelector(".blocklyToolboxDiv").style.display="none",e.css("left","0px"),e.css({borderRadius:"0px 10px 10px 0px",backgroundColor:handleColor(),left:document.querySelector(".blocklyToolboxDiv").offsetWidth+"px"}).on("click",function(t){"none"===$(".blocklyToolboxDiv").css("display")?(document.querySelector(".blocklyToolboxDiv").style.display="block",e.css("left",document.querySelector(".blocklyToolboxDiv").offsetWidth+"px")):(workspace.getToolbox().width=0,workspace.deleteAreaToolbox_.right=0,document.querySelector(".blocklyToolboxDiv").style.display="none",e.css("left","0px"))})},300);
//# sourceMappingURL=.maps/editor.min.js.map
